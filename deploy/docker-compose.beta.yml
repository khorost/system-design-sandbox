version: "3.8"

# Beta: использует :latest из develop ветки
# Обновление: docker compose -f docker-compose.beta.yml pull && docker compose -f docker-compose.beta.yml up -d

services:
  web:
    image: khorost/sdsandbox-web:latest
    container_name: sdsandbox-web-beta
    restart: unless-stopped
    ports:
      - "3001:80"

  server:
    image: khorost/sdsandbox-server:latest
    container_name: sdsandbox-server-beta
    restart: unless-stopped
    ports:
      - "4001:8080"
    environment:
      - DATABASE_URL=${DATABASE_URL_BETA}
      - REDIS_URL=${REDIS_URL_BETA}
      - REDIS_PASSWORD=${REDIS_PASSWORD_BETA}
      - REDIS_DB=${REDIS_DB_BETA:-0}
      - REDIS_SENTINEL_ACTIVE=${REDIS_SENTINEL_ACTIVE_BETA:-false}
      - REDIS_SENTINEL_MASTER=${REDIS_SENTINEL_MASTER_BETA}
      - REDIS_SENTINEL_URL=${REDIS_SENTINEL_URL_BETA}
