# =============================================================================
# System Design Sandbox — Server Environment
# Скопируйте в .env и заполните реальными значениями:
#   cp .env.example .env
# =============================================================================
LOG_LEVEL=INFO
LOG_STRUCT=true

PUBLIC_URL=https://sdsandbox.ru

# --- PostgreSQL ---------------------------------------------------------------
# Формат: postgres://user:password@host:port/dbname?sslmode=disable
DATABASE_URL=postgres://sandbox:sandbox@localhost:5432/sdsandbox?sslmode=disable

# --- Server -------------------------------------------------------------------
SERVER_PORT=8080

# --- Redis (standalone) -------------------------------------------------------
REDIS_URL=localhost:6379
REDIS_PASSWORD=
REDIS_DB=0

# --- Redis Sentinel (альтернатива standalone, раскомментировать при необходимости)
# REDIS_SENTINEL_ACTIVE=true
# REDIS_SENTINEL_URL=localhost:26379,localhost:26380,localhost:26381
# REDIS_SENTINEL_MASTER=mymaster

# --- JWT ----------------------------------------------------------------------
JWT_SECRET=change-me-to-random-secret-at-least-32-chars

# --- SMTP ---------------------------------------------------------------------
# Режимы TLS: none (порт 25), starttls (порт 587), tls (порт 465)
# Если SMTP_USER пустой — подключение без авторизации
SMTP_HOST=localhost
SMTP_PORT=587
SMTP_USER=
SMTP_PASSWORD=
SMTP_TLS=starttls
SMTP_FROM=noreply@sdsandbox.ru

# --- Rate Limiting ------------------------------------------------------------
RATE_LIMIT_PER_MINUTE=5
RATE_LIMIT_PER_HOUR=20

# --- Referral -----------------------------------------------------------------
# Show "How did you hear about us?" field on login page
REFERRAL_FIELD_ENABLED=false

# --- Session Log --------------------------------------------------------------
# Write session events (login, refresh, logout, revoke) to PostgreSQL session_log table.
# If false, session data is only in Redis (no persistent audit trail).
SESSION_LOG_ENABLED=false

# --- GeoIP --------------------------------------------------------------------
# Путь к файлу MaxMind GeoLite2-City.mmdb
# Скачать: https://dev.maxmind.com/geoip/geolite2-free-geolocation-data
MAXMIND_GEOLITE2=./data/GeoLite2-City.mmdb
